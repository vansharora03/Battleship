(()=>{"use strict";const t=function(t=null){return{length:t,hits:0,hit:function(){this.isSunk()||this.hits++},isSunk:function(){return this.hits>=this.length}}},e=function(){const t={board:function(t){let e=[];for(let t=0;t<7;t++){e[t]=[];for(let n=0;n<7;n++)e[t][n]={ship:null,tried:!1}}return e}(),ships:[],placeShip:function(t,e,n,a=!1){let o=[t,e];if(a){t+n.length-1>=7&&(o=[7-n.length,e]);let a=o[1],r=o[0];for(let t=0;t<n.length;t++)if(this.board[a][r+t].ship)return!1;this.ships.push(n);for(let t=0;t<n.length;t++)this.board[a][r+t].ship=n}else{e+n.length-1>=7&&(o=[t,7-n.length]);let a=o[1],r=o[0];for(let t=0;t<n.length;t++)if(this.board[a+t][r].ship)return!1;this.ships.push(n);for(let t=0;t<n.length;t++)this.board[a+t][r].ship=n}return!0},receiveAttack:function(t,e){let n=this.board[e][t];n.tried||(n.tried=!0,null!==n.ship&&n.ship.hit())},lost:function(){return this.ships.every((t=>t.isSunk()))}},e=new Set,n=function(t,n){e.has(this.opponent.gameboard.board[n][t])||(this.opponent.gameboard.receiveAttack(t,n),e.add(this.opponent.gameboard.board[n][t]))},a=function(t){return Math.floor(Math.random()*t)},o=function(t=a){let r=t(7),s=t(7);e.has(this.opponent.gameboard.board[s][r])?o.call(this,t):(n.call(this,r,s),e.add(this.opponent.gameboard.board[s][r]))};return{gameboard:t,opponent:null,attack:n,computerAttack:o}},n=document.querySelector(".content"),a=document.querySelector(".startGameBtn"),o=function(n){const a=e(),o=e();a.opponent=o,o.opponent=a;return{setUpUserBoard:function(){const t=document.createElement("div");t.classList.add("user-board");for(let e=0;e<a.gameboard.board.length;e++)for(let n=0;n<a.gameboard.board[e].length;n++){const a=document.createElement("div");a.classList.add("user-board-square"),a.dataset.x=n,a.dataset.y=e,t.appendChild(a)}n.appendChild(t)},setUpComputerBoard:function(){const t=document.createElement("div");t.classList.add("computer-board");for(let e=0;e<o.gameboard.board.length;e++)for(let n=0;n<o.gameboard.board[e].length;n++){const a=document.createElement("div");a.classList.add("computer-board-square"),a.dataset.x=n,a.dataset.y=e,t.appendChild(a)}n.appendChild(t)},startGame:function(){!function(){const e=new t(2),n=new t(3),o=new t(5);a.gameboard.placeShip(0,0,e),a.gameboard.placeShip(3,1,n),a.gameboard.placeShip(2,5,o,!0),document.querySelectorAll(".user-board-square").forEach((t=>{null!==a.gameboard.board[parseInt(t.dataset.y)][parseInt(t.dataset.x)].ship&&t.classList.add("ship")}))}()}}}(n);o.setUpUserBoard(),o.setUpComputerBoard(),a.addEventListener("click",(()=>{o.startGame()}))})();